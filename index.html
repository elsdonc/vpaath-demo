<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Vpaath Demo</title>
    <script lang="javascript" src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    <script type="module" src="script.js" defer></script>
</head>
<body>
    <div class="emr-container">
        <button id="downloadReport">Download Report</button>
        <h1>Electronic Medical Record</h1>

        <!-- Tabs for Members -->
        <div class="tabs">
            <button class="tab" data-member-id="1">John Doe</button>
            <button class="tab" data-member-id="2">Jane Smith</button>
            <button class="tab" data-member-id="3">Michael Johnson</button>
            <button class="tab" data-member-id="4">Emily Davis</button>
            <button class="tab" data-member-id="5">David Brown</button>
            <button class="tab" data-member-id="6">Sophia Martinez</button>
        </div>

        <!-- Member Info Section -->
        <div id="memberInfo" class="emr-section">
            <h2>Member Information</h2>
            <div class="emr-field">
                <div class="emr-label">Patient Name:</div>
                <div id="memberName" class="emr-value"></div>
                <div class="emr-label">Address:</div>
                <div id="address" class="emr-value"></div>
                <div id="address2" class="emr-value"></div>
                <input type="text" id="zipcodeInput" class="input-field" maxlength="5" placeholder="Enter ZIP Code">
            </div>

            <!-- Non-Editable Dummy EMR Data -->
            <div class="emr-section">
                <h2>Demographics</h2>
                <div class="emr-field">
                    <div class="emr-label">Date of Birth:</div>
                    <div id="dob" class="emr-value"></div>
                </div>
                <div class="emr-field">
                    <div class="emr-label">Gender:</div>
                    <div id="gender" class="emr-value"></div>
                </div>
            </div>

            <!-- Medical History Section -->
            <div class="emr-section">
                <h2>Medical History</h2>
                <div class="emr-field">
                    <div class="emr-label">Known Conditions:</div>
                    <div id="knownConditions" class="emr-value"></div>
                </div>
                <div class="emr-field">
                    <div class="emr-label">Allergies:</div>
                    <div id="allergies" class="emr-value"></div>
                </div>
                <div class="emr-field">
                    <div class="emr-label">Surgeries:</div>
                    <div id="surgeries" class="emr-value"></div>
                </div>
            </div>

            <!-- Current Medications Section -->
            <div class="emr-section">
                <h2>Current Medications</h2>
                <div id="currentMeds" class="emr-value"></div>
            </div>

            <!-- Lab Results Section -->
            <div class="emr-section">
                <h2>Recent Lab Results</h2>
                <div id="labResults" class="emr-value"></div>
            </div>
        </div>
        <div class="sdoh-data" id="sdohDataBox">
            <div id="loadingIndicator" class="loading" style="display: none;">
                Loading resources...
                <div class="spinner"></div>
            </div>
            <div class="resources">
                <div id="diabetes-resources-container" style="display: none;">
                    <label for="diabetes-resources" class="emr-label">Diabetes Resources:</label>
                    <select id="diabetes-resources" class="input-field" onchange="openSearchTab()">
                        <option value="" disabled selected>View Resources</option>
                    </select>
                </div>
                <div id="cvd-resources-container" style="display: none;" onchange="openSearchTab()">
                    <label for="cvd-resources" class="emr-label">Cardiovascular Disease Resources:</label>
                    <select id="cvd-resources" class="input-field">
                        <option value="" disabled selected>View Resources</option>
                    </select>
                </div>
            </div>
            <h3>VPAATH SDOH Data</h3>
            <div id="result" class="emr-section"><div class="emr-field">
        </div>
    </div>
    </div>
    
    </div>
    <script>
        function openSearchTab() {
            const select = event.target;
            const selectedText = select.options[select.selectedIndex].textContent;

            if (selectedText) {
                const searchQuery = encodeURIComponent(selectedText);
                const url = `https://www.google.com/maps/search/${searchQuery}`;
                window.open(url, '_blank');
            }
        }
    </script>
</body>
</html>
